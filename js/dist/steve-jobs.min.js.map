{"version":3,"sources":["steve-jobs.js"],"names":["updateDepth","book","newPage","page","turn","pages","depthWidth","Math","min","$","css","width","left","right","loadPage","ajax","url","done","html","pageHtml","replace","class","height","element","zoomHandle","zoomThis","target","translate","transitionEnd","e","zCenterX","data","zoomIn","zoomOut","bookPos","offset","picPos","pic","tmpContainer","tmpPic","appendTo","realHeight","overflow","picPosition","top","zCenterY","position","zoomFactor","cssTransitionEnd","margin","visibility","click","hide","realWidth","this","attr","window","transform","show","bind","Modernizr","csstransforms","zIndex","yes","previewSrc","completeTransition","unbind","_thumbPreview","addClass","preview","remove","backgroundImage","setTimeout","removeClass","moveBar","navigator","userAgent","children","view","slider","previewWidth","previewHeight","backgroundPosition","isChrome","indexOf"],"mappings":"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","file":"steve-jobs.min.js","sourcesContent":["/* Steve jobs' book */\n\nfunction updateDepth(book, newPage) {\n\n\tvar page = book.turn('page'),\n\t\tpages = book.turn('pages'),\n\t\tdepthWidth = 16*Math.min(1, page*2/pages);\n\n\t\tnewPage = newPage || page;\n\n\tif (newPage>3)\n\t\t$('.sj-book .p2 .depth').css({\n\t\t\twidth: depthWidth,\n\t\t\tleft: 20 - depthWidth\n\t\t});\n\telse\n\t\t$('.sj-book .p2 .depth').css({width: 0});\n\n\t\tdepthWidth = 16*Math.min(1, (pages-page)*2/pages);\n\n\tif (newPage<pages-3)\n\t\t$('.sj-book .p21 .depth').css({\n\t\t\twidth: depthWidth,\n\t\t\tright: 20 - depthWidth\n\t\t});\n\telse\n\t\t$('.sj-book .p21 .depth').css({width: 0});\n\n}\n\nfunction loadPage(page) {\n\n\t$.ajax({url: 'pages/page' + page + '.html'}).\n\t\tdone(function(pageHtml) {\n\t\t\t$('.sj-book .p' + page).html(pageHtml.replace('samples/steve-jobs/', ''));\n\t\t});\n\n}\n\nfunction addPage(page, book) {\n\n\tvar id, pages = book.turn('pages');\n\n\tif (!book.turn('hasPage', page)) {\n\n\t\tvar element = $('<div />',\n\t\t\t{'class': 'own-size',\n\t\t\t\tcss: {width: 460, height: 582}\n\t\t\t}).\n\t\t\thtml('<div class=\"loader\"></div>');\n\n\t\tif (book.turn('addPage', element, page)) {\n\t\t\tloadPage(page);\n\t\t}\n\n\t}\n}\n\nfunction numberOfViews(book) {\n\n\treturn book.turn('pages') / 2 + 1;\n\n}\n\nfunction getViewNumber(book, page) {\n\n\treturn parseInt((page || book.turn('page'))/2 + 1, 10);\n\n}\n\nfunction zoomHandle(e) {\n\n\tif ($('.sj-book').data().zoomIn)\n\t\tzoomOut();\n\telse if (e.target && $(e.target).hasClass('zoom-this')) {\n\t\tzoomThis($(e.target));\n\t}\n\n}\n\nfunction zoomThis(pic) {\n\n\tvar\tposition, translate,\n\t\ttmpContainer = $('<div />', {'class': 'zoom-pic'}),\n\t\ttransitionEnd = $.cssTransitionEnd(),\n\t\ttmpPic = $('<img />'),\n\t\tzCenterX = $('#book-zoom').width()/2,\n\t\tzCenterY = $('#book-zoom').height()/2,\n\t\tbookPos = $('#book-zoom').offset(),\n\t\tpicPos = {\n\t\t\tleft: pic.offset().left - bookPos.left,\n\t\t\ttop: pic.offset().top - bookPos.top\n\t\t},\n\t\tcompleteTransition = function() {\n\t\t\t$('#book-zoom').unbind(transitionEnd);\n\n\t\t\tif ($('.sj-book').data().zoomIn) {\n\t\t\t\ttmpContainer.appendTo($('body'));\n\n\t\t\t\t$('body').css({'overflow': 'hidden'});\n\t\t\t\t\n\t\t\t\ttmpPic.css({\n\t\t\t\t\tmargin: position.top + 'px ' + position.left+'px'\n\t\t\t\t}).\n\t\t\t\tappendTo(tmpContainer).\n\t\t\t\tfadeOut(0).\n\t\t\t\tfadeIn(500);\n\t\t\t}\n\t\t};\n\n\t\t$('.sj-book').data().zoomIn = true;\n\n\t\t$('.sj-book').turn('disable', true);\n\n\t\t$(window).resize(zoomOut);\n\t\t\n\t\ttmpContainer.click(zoomOut);\n\n\t\ttmpPic.load(function() {\n\t\t\tvar realWidth = $(this)[0].width,\n\t\t\t\trealHeight = $(this)[0].height,\n\t\t\t\tzoomFactor = realWidth/pic.width(),\n\t\t\t\tpicPosition = {\n\t\t\t\t\ttop:  (picPos.top - zCenterY)*zoomFactor + zCenterY + bookPos.top,\n\t\t\t\t\tleft: (picPos.left - zCenterX)*zoomFactor + zCenterX + bookPos.left\n\t\t\t\t};\n\n\n\t\t\tposition = {\n\t\t\t\ttop: ($(window).height()-realHeight)/2,\n\t\t\t\tleft: ($(window).width()-realWidth)/2\n\t\t\t};\n\n\t\t\ttranslate = {\n\t\t\t\ttop: position.top-picPosition.top,\n\t\t\t\tleft: position.left-picPosition.left\n\t\t\t};\n\n\t\t\t$('.samples .bar').css({visibility: 'hidden'});\n\t\t\t$('#slider-bar').hide();\n\t\t\t\n\t\t\n\t\t\t$('#book-zoom').transform(\n\t\t\t\t'translate('+translate.left+'px, '+translate.top+'px)' +\n\t\t\t\t'scale('+zoomFactor+', '+zoomFactor+')');\n\n\t\t\tif (transitionEnd)\n\t\t\t\t$('#book-zoom').bind(transitionEnd, completeTransition);\n\t\t\telse\n\t\t\t\tsetTimeout(completeTransition, 1000);\n\n\t\t});\n\n\t\ttmpPic.attr('src', pic.attr('src'));\n\n}\n\nfunction zoomOut() {\n\n\tvar transitionEnd = $.cssTransitionEnd(),\n\t\tcompleteTransition = function(e) {\n\t\t\t$('#book-zoom').unbind(transitionEnd);\n\t\t\t$('.sj-book').turn('disable', false);\n\t\t\t$('body').css({'overflow': 'auto'});\n\t\t\tmoveBar(false);\n\t\t};\n\n\t$('.sj-book').data().zoomIn = false;\n\n\t$(window).unbind('resize', zoomOut);\n\n\tmoveBar(true);\n\n\t$('.zoom-pic').remove();\n\t$('#book-zoom').transform('scale(1, 1)');\n\t$('.samples .bar').css({visibility: 'visible'});\n\t$('#slider-bar').show();\n\n\tif (transitionEnd)\n\t\t$('#book-zoom').bind(transitionEnd, completeTransition);\n\telse\n\t\tsetTimeout(completeTransition, 1000);\n}\n\n\nfunction moveBar(yes) {\n\tif (Modernizr && Modernizr.csstransforms) {\n\t\t$('#slider .ui-slider-handle').css({zIndex: yes ? -1 : 10000});\n\t}\n}\n\nfunction setPreview(view) {\n\n\tvar previewWidth = 115,\n\t\tpreviewHeight = 73,\n\t\tpreviewSrc = 'pages/preview.jpg',\n\t\tpreview = $(_thumbPreview.children(':first')),\n\t\tnumPages = (view==1 || view==$('#slider').slider('option', 'max')) ? 1 : 2,\n\t\twidth = (numPages==1) ? previewWidth/2 : previewWidth;\n\n\t_thumbPreview.\n\t\taddClass('no-transition').\n\t\tcss({width: width + 15,\n\t\t\theight: previewHeight + 15,\n\t\t\ttop: -previewHeight - 30,\n\t\t\tleft: ($($('#slider').children(':first')).width() - width - 15)/2\n\t\t});\n\n\tpreview.css({\n\t\twidth: width,\n\t\theight: previewHeight\n\t});\n\n\tif (preview.css('background-image')==='' ||\n\t\tpreview.css('background-image')=='none') {\n\n\t\tpreview.css({backgroundImage: 'url(' + previewSrc + ')'});\n\n\t\tsetTimeout(function(){\n\t\t\t_thumbPreview.removeClass('no-transition');\n\t\t}, 0);\n\n\t}\n\n\tpreview.css({backgroundPosition:\n\t\t'0px -'+((view-1)*previewHeight)+'px'\n\t});\n}\n\nfunction isChrome() {\n\n\t// Chrome's unsolved bug\n\t// http://code.google.com/p/chromium/issues/detail?id=128488\n\n\treturn navigator.userAgent.indexOf('Chrome')!=-1;\n\n}"]}